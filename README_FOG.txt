Freezing of Gait (FoG) Detection ModuleOverviewThis module detects Freezing of Gait (FoG) events from a forward displacement signal derived from pose estimation data. FoG is characterized by a sudden pause or dramatic reduction in forward movement—often accompanied by rapid, high-frequency trembling in the lower limbs. Our algorithm uses a combination of forward velocity computation and spectral analysis to identify these events.Algorithm Logic1. Forward Displacement SignalThe forward displacement signal is computed as the difference between the z-coordinates of the toe markers (left and right) and the sacrum. The average of the two toe signals is used as the final forward displacement signal.2. Forward Velocity CalculationThe algorithm computes the forward velocity by taking the numerical gradient of the forward displacement signal (scaled by the frame rate). This provides an estimate of movement speed (units per second).3. Low-Pass FilteringA Butterworth low-pass filter is applied to the computed velocity (default cutoff: 2.5?Hz) to smooth the signal and reduce noise, ensuring that only meaningful changes in movement are considered.4. Sliding Window AnalysisThe signal is analyzed in overlapping windows:o Window Size: Typically 2.0 seconds.o Step Size: Typically 0.5 seconds.In each window, two key metrics are computed:o Mean Forward Velocity: The average of the absolute velocity values within the window.o Freeze Index (FI): This is computed by performing a Fast Fourier Transform (FFT) on the windowed signal and calculating the power ratio:* Freeze Band (3–8?Hz): Indicates high-frequency trembling typically associated with FoG.* Locomotor Band (0.5–3?Hz): Represents normal walking frequencies.The Freeze Index is defined as:FI=Power in Freeze BandPower in Locomotor Band\text{FI} = \frac{\text{Power in Freeze Band}}{\text{Power in Locomotor Band}}FI=Power in Locomotor BandPower in Freeze Band?5. Detection CriteriaA FoG event is flagged in a window if:o The mean forward velocity is below a specified velocity threshold (suggesting near or no forward movement).o The Freeze Index is above a specified FI threshold (indicating increased high-frequency activity).Adjacent windows meeting these criteria are aggregated to form continuous freeze episodes.ParametersThe module’s behavior is controlled via several parameters:* frame_rate:Frames per second of the input video/pose data (required).* window_size_sec (default: 2.0):Duration of each sliding window in seconds.* step_size_sec (default: 0.5):Step size (overlap) for sliding the window along the signal.* velocity_threshold (default: 0.05 units/second):The threshold below which the mean forward velocity suggests a potential freeze. Adjust according to the scaling of your displacement signal.* fi_threshold (default: 2.0):The threshold for the Freeze Index. If the FI exceeds this value, it indicates a strong presence of high-frequency tremor typical of FoG.* Filter Settings:The low-pass filter used for smoothing the velocity typically has:o A cutoff frequency of 2.5 Hz.o Order of 4 (configurable if needed).